# GUESSWHAT - AI GAME

## Docker setup
#### Prerequisites: docker

Run the following command in the root directory of the project.
```
docker-compose up
```

The app will be available at http://localhost:3001 and it is the only port that is exposed.

## Local setup

### Backend
Prerequisites: docker, python
```bash
docker run -p 6379:6379 -d redis
```
```bash
cd backend
pip install -r requirements.txt
python manage.py runserver
```
### Fronend
Prerequisites: Node
```bash
cd frontend
npm i
npm start
```

## Technologies

### Backend 
- Python
- Django
- SQLite
- Redis
- Websockets

### Image generation
- Python
- OpenAI api
- Huggingface api

### Frontend
- React


## Architecture

### Backend
The backend is a Django app that exposes a REST API and a websocket connection. The websocket connection is used in a multiplayer mode to create rooms and synchronize users rounds and scores. The REST API is used to retrieve image sets for specific games. It can also be used to upload new images to the database.


### Image generation
The image generation is a Python script that uses OpenAI api to generate prompts, that are then used to generate images with Huggingface api. Afterwards the images and prompts can be uploaded to the database.


### Frontend
The frontend is a React app that retrieves image sets from the backend and uses them to create different games for the user. The are two games that can be played in a single player mode and one in a multiplayer mode. In the multiplayer mode the game is synchronized with other players using a websocket connection.


### Database
#### Single player
- The `Game` model represents a game that can be played by a single player. It has a `name` field that is used to identify the game and a `description` field that is used to describe the game.
- The `Image` model is related to the `Set` and represents an image that is used in a game. It has a `url` field that is used to store the url of the image and a `prompt` field that is used to store the prompt that was used to generate the image.
- The `Set` model is related to the `Game` and represents a set of images that are used in a game. 

#### Multiplayer
- The `Session` model has a `code` field that is used to identify the session.
- The `Round` model is related to the `Session` and represents a round in a multiplayer game.
- The `Player` model is related to a session using a foreign key and represents a player in a session, represented by their nick.
- The `Vote` represents a player's vote for a round and tells whether the player guessed the image correctly or not.


## Game Modes
All the games are based on the idea of connecting the prompt that was used to generate the image with the image itself.


### Single player
#### Blur Game
The user is presented with an image and set of prompts. The user has to select the prompt that was used to generate the image. After 5 rounds or if their time runs out the user is presented with their score. Users can change the time limit in the settings as well as the image blue level. There are 3 levels of blur: `easy` (no blur), `medium` (some blur) and `hard` (heavy blur + grey scale).


#### Ordering Game
This time user is presented with the same number of prompts and images. The user has to order the prompts in a way that they match the images. 


### Multiplayer
In the multiplayer mode users are presented with the same set of images and one random prompt, that might differ between players. The users have to select image that was generated by their prompt. In each round players wait for others to finish and then they move to the next round. After completing the game users are presented with scores of all  participants. 


## ABOUT: MOCKUPS
Zdjęcie przedstawiające wizje naszej aplikacji od strony Front-Endu:
![alt text](https://github.com/dark-panthers/ai-game/blob/main/mockup.jpeg)
Zawarte są w niej szkice poszczególnych podstron: Home Page, Start Page, Game Page

Oficjalna wersja stylizacji CSS, była przeprowadzona po zakończeniu pracy nad wszystkimi podstronami, by ujednolicić motyw.
